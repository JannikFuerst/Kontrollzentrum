<div class="modal-overlay" id="modalOverlay" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <div class="modal-head">
      <div class="modal-title" id="modalTitle">Neue App hinzufügen</div>
      <button class="icon-btn" id="modalClose" type="button" aria-label="Schließen">✕</button>
    </div>

    <div class="modal-body">
      <div class="field">
        <div class="label" style="display:flex;align-items:center;justify-content:space-between;">
          <span>Icon (optional)</span>
          <div style="display:flex;gap:8px;">
            <button class="icon-btn" id="iconRemove" type="button" title="Icon entfernen" aria-label="Icon entfernen">🗑</button>
            <button class="icon-btn" id="iconUploadBtn" type="button" title="Icon hochladen" aria-label="Icon hochladen">⤴</button>
          </div>
        </div>

        <div style="display:flex;align-items:center;gap:12px;margin-top:10px;">
          <div class="icon-tile selected" style="width:52px;height:52px;border-radius:14px;">
            <img id="iconPreviewImg" class="icon-img" alt="">
          </div>
          <div style="display:flex;flex-direction:column;gap:4px;">
            <div class="help-strong">Standard: automatisch aus URL (Favicon)</div>
            <div class="help-text">Oder eigenes PNG/JPG hochladen.</div>
          </div>
        </div>

        <input id="iconUpload" type="file" accept="image/png,image/jpeg,image/jpg,image/webp" hidden />
      </div>

      <div class="field">
        <div class="label">Name <span class="req">*</span></div>
        <input class="input" id="appName" placeholder="z.B. Notion / Discord" />
      </div>

      <div class="row2">
        <div class="field">
          <div class="label">Typ</div>
          <select class="select" id="appType">
            <option value="web">Web (https://...)</option>
            <option value="desktop">Desktop (URI / file://)</option>
            <option value="scan" selected>Desktop (Scan Vorschläge)</option>
          </select>
        </div>

        <div class="field">
          <div class="label">Kategorie</div>
          <select class="select" id="appCategory"></select>
        </div>
      </div>

      <div class="field" id="launchField">
        <div class="label" id="launchLabel">URL <span class="req">*</span></div>
        <input class="input" id="appUrl" placeholder="https://..." />
        <div id="launchHelp" class="help-text">
          Beispiel: https://notion.so
        </div>
      </div>

      <div class="field hidden" id="scanField">
        <div class="label">Gefundene Apps</div>
        <div class="scan-row">
          <select class="select" id="scanSelect"></select>
          <button class="icon-btn scan-refresh" id="scanRefresh" type="button" title="Scan aktualisieren" aria-label="Scan aktualisieren">↻</button>
        </div>
        <div class="help-text">
          Wähle eine App aus dem Windows‑Scan.
        </div>
        <div class="scan-loading hidden" id="scanLoading">
          <span class="dot"></span><span class="dot"></span><span class="dot"></span>
        </div>
      </div>

      <div class="field">
        <div class="label">Beschreibung</div>
        <input class="input" id="appDesc" placeholder="Optional" />
      </div>
    </div>

    <div class="modal-foot">
      <button class="btn-ghost" id="cancelBtn" type="button">Abbrechen</button>
      <button class="btn-primary" id="submitBtn" type="button">Hinzufügen</button>
    </div>
  </div>
</div>

<div class="modal-overlay" id="confirmOverlay" aria-hidden="true">
  <div class="modal modal-confirm" role="dialog" aria-modal="true" aria-labelledby="confirmTitle">
    <div class="modal-head">
      <div class="modal-title" id="confirmTitle">Löschen bestätigen</div>
      <button class="icon-btn" id="confirmClose" type="button" aria-label="Schließen">×</button>
    </div>
    <div class="modal-body">
      <div class="confirm-text" id="confirmText">Möchtest du diese App wirklich löschen?</div>
    </div>
    <div class="modal-foot">
      <button class="btn-ghost" id="confirmCancel" type="button">Abbrechen</button>
      <button class="btn-primary" id="confirmOk" type="button">Löschen</button>
    </div>
  </div>
</div>

<div class="modal-overlay" id="catManageOverlay" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true" aria-labelledby="catManageTitle">
    <div class="modal-head">
      <div class="modal-title" id="catManageTitle">Kategorien verwalten</div>
      <button class="icon-btn" id="catManageClose" type="button" aria-label="Schließen">×</button>
    </div>
    <div class="modal-body">
      <div class="field">
        <div class="label">Neue Kategorie</div>
        <div class="row2">
          <input class="input" id="catManageInput" placeholder="z.B. Lernen, Finanzen..." />
          <button class="btn-primary" id="catManageAdd" type="button">Hinzufügen</button>
        </div>
        <div class="help-text">Löschen verschiebt Apps automatisch nach "Sonstiges".</div>
      </div>
      <div class="field">
        <div class="label">Vorhandene Kategorien</div>
        <div class="cat-manage-list" id="catManageList"></div>
      </div>
    </div>
    <div class="modal-foot">
      <button class="btn-ghost" id="catManageCancel" type="button">Schließen</button>
    </div>
  </div>
</div>

<div class="modal-overlay" id="settingsOverlay" aria-hidden="true">
  <div class="modal modal-settings" role="dialog" aria-modal="true" aria-labelledby="settingsTitle">
    <div class="modal-head">
      <div class="modal-title" id="settingsTitle">Einstellungen</div>
      <button class="icon-btn" id="settingsClose" type="button" aria-label="Schließen">×</button>
    </div>
    <div class="modal-body">
      <div class="field">
        <div class="label">Hotkey (App ein/ausblenden)</div>
        <div class="row2">
          <input class="input" id="hotkeyInput" placeholder="Drücke 'Aufnehmen'…" readonly />
          <button class="btn-primary" id="hotkeyCapture" type="button">Aufnehmen</button>
        </div>
        <div class="help-text">
          Klicke auf „Aufnehmen“ und drücke die gewünschte Kombination.
        </div>
      </div>
      <div class="field">
        <div class="label">Clipboard Verlauf</div>
        <select class="select" id="clipboardRetentionMode">
          <option value="count">Nach Anzahl löschen</option>
          <option value="time">Nach Zeit löschen</option>
          <option value="unlimited">Unbegrenzt (manuell)</option>
        </select>
        <div class="clipboard-setting-extra hidden" id="clipboardTimeWrap">
          <div class="label">Zeitfenster</div>
          <select class="select" id="clipboardTimeCycle">
            <option value="4">4 Stunden</option>
            <option value="8">8 Stunden</option>
            <option value="24">24 Stunden</option>
            <option value="48">48 Stunden</option>
          </select>
        </div>
        <div class="clipboard-setting-extra hidden" id="clipboardCountWrap">
          <div class="label">Max. Einträge</div>
          <select class="select" id="clipboardMaxItems">
            <option value="50">50</option>
            <option value="100">100</option>
            <option value="500">500</option>
            <option value="1000">1000</option>
          </select>
        </div>
        <div class="help-text">Der Verlauf bleibt lokal auf diesem Gerät und kann jederzeit mit "Leeren" gelöscht werden.</div>
      </div>
      <div class="field">
        <div class="label">Theme</div>
        <div class="theme-row">
          <span class="theme-label">Light Mode</span>
          <label class="switch">
            <input type="checkbox" id="themeToggle" />
            <span class="slider"></span>
          </label>
        </div>
      </div>
      <div class="field">
        <div class="label">Akzentfarbe</div>
        <div class="accent-row" id="accentRow">
          <button class="accent-btn" data-accent="purple" title="Lila"></button>
          <button class="accent-btn" data-accent="blue" title="Blau"></button>
          <button class="accent-btn" data-accent="green" title="Grün"></button>
          <button class="accent-btn" data-accent="yellow" title="Gelb"></button>
          <button class="accent-btn" data-accent="pink" title="Pink"></button>
          <button class="accent-btn" data-accent="teal" title="Türkis"></button>
          <button class="accent-btn" data-accent="orange" title="Orange"></button>
          <button class="accent-btn" data-accent="red" title="Rot"></button>
          <button class="accent-btn" data-accent="cyan" title="Cyan"></button>
          <button class="accent-btn" data-accent="gray" title="Grau"></button>
        </div>
      </div>
      <div class="field">
        <div class="label">Hintergrund</div>
        <div class="bg-choices" id="bgChoices">
          <label class="bg-choice">
            <input type="radio" name="bgMode" value="theme" />
            <span class="bg-thumb bg-theme"></span>
            <span class="bg-label">Standard</span>
          </label>
          <label class="bg-choice">
            <input type="radio" name="bgMode" value="mono" />
            <span class="bg-thumb bg-mono"></span>
            <span class="bg-label">Mono</span>
          </label>
          <label class="bg-choice bg-choice-duo">
            <input type="radio" name="bgMode" value="duo" />
            <span class="bg-thumb bg-duo"></span>
            <span class="bg-label">Duo</span>
          </label>
          <label class="bg-choice">
            <input type="radio" name="bgMode" value="custom" />
            <span class="bg-thumb bg-custom"></span>
            <span class="bg-label">Custom</span>
          </label>
        </div>
        <div class="bg-duo hidden" id="bgDuoControls">
          <div class="label">Duo Farben</div>
          <div class="bg-duo-row">
            <span class="bg-duo-label">Oben rechts</span>
            <div class="bg-duo-palette" id="bgDuoTop"></div>
          </div>
          <div class="bg-duo-row">
            <span class="bg-duo-label">Unten links</span>
            <div class="bg-duo-palette" id="bgDuoBottom"></div>
          </div>
        </div>
        <div class="bg-upload hidden" id="bgUploadRow">
          <input class="input" id="bgUploadName" placeholder="Kein Bild gewaehlt" readonly />
          <button class="btn-primary" id="bgUploadBtn" type="button">Bild hochladen</button>
          <input id="bgUpload" type="file" accept="image/png,image/jpeg,image/jpg,image/webp" hidden />
        </div>
        <div class="help-text">Erlaubte Groesse: 1920x1080, 2560x1440, 3840x2160, 5184x3456</div>
        <div class="error-box hidden" id="bgError">Bild hat falsches Format. Bitte 1920x1080, 2560x1440, 3840x2160 oder 5184x3456 verwenden.</div>
      </div>
    </div>
    <div class="modal-foot">
      <button class="btn-ghost" id="hotkeyCancel" type="button">Abbrechen</button>
      <button class="btn-primary" id="hotkeySave" type="button">Speichern</button>
    </div>
  </div>
</div>

