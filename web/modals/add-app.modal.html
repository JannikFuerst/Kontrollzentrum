<div class="modal-overlay" id="modalOverlay" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <div class="modal-head">
      <div class="modal-title" id="modalTitle" data-i18n="modal_add_title">Neue App hinzufügen</div>
      <button class="icon-btn" id="modalClose" type="button" aria-label="Schließen" data-i18n-aria-label="close_aria">&times;</button>
    </div>
    <div class="modal-body">
      <div class="field">
        <div class="label" style="display:flex;align-items:center;justify-content:space-between;">
          <span data-i18n="modal_icon_optional">Icon (optional)</span>
          <div style="display:flex;gap:8px;">
            <button class="icon-btn" id="iconRemove" type="button" title="Icon entfernen" aria-label="Icon entfernen" data-i18n-title="modal_icon_remove" data-i18n-aria-label="modal_icon_remove">&#128465;</button>
            <button class="icon-btn" id="iconUploadBtn" type="button" title="Icon hochladen" aria-label="Icon hochladen" data-i18n-title="modal_icon_upload" data-i18n-aria-label="modal_icon_upload">&#10514;</button>
          </div>
        </div>

        <div style="display:flex;align-items:center;gap:12px;margin-top:10px;">
          <div class="icon-tile selected" style="width:52px;height:52px;border-radius:14px;">
            <img id="iconPreviewImg" class="icon-img" alt="">
          </div>
          <div style="display:flex;flex-direction:column;gap:4px;">
            <div class="help-strong" data-i18n="modal_icon_auto">Standard: automatisch aus URL (Favicon)</div>
            <div class="help-text" data-i18n="modal_icon_custom_help">Oder eigenes PNG/JPG hochladen.</div>
          </div>
        </div>

        <input id="iconUpload" type="file" accept="image/png,image/jpeg,image/jpg,image/webp" hidden />
      </div>

      <div class="field">
        <div class="label" data-i18n="modal_name_label">Name <span class="req">*</span></div>
        <input class="input" id="appName" placeholder="z.B. Notion / Discord" data-i18n-placeholder="modal_name_placeholder" />
      </div>

      <div class="row2">
        <div class="field">
          <div class="label" data-i18n="modal_type_label">Typ</div>
          <select class="select" id="appType">
            <option value="web" data-i18n="modal_type_web">Web (https://...)</option>
            <option value="desktop" data-i18n="modal_type_desktop">Desktop (URI / file://)</option>
            <option value="scan" selected data-i18n="modal_type_scan">Desktop (Scan Vorschläge)</option>
          </select>
        </div>

        <div class="field">
          <div class="label" data-i18n="modal_category_label">Kategorie</div>
          <select class="select" id="appCategory"></select>
        </div>
      </div>

      <div class="field" id="launchField">
        <div class="label" id="launchLabel" data-i18n="modal_url_label">URL <span class="req">*</span></div>
        <input class="input" id="appUrl" placeholder="https://..." data-i18n-placeholder="modal_url_placeholder" />
        <div id="launchHelp" class="help-text">
          <span data-i18n="modal_url_example">Beispiel: https://notion.so</span>
        </div>
      </div>

      <div class="field hidden" id="scanField">
        <div class="label" data-i18n="modal_found_apps">Gefundene Apps</div>
        <div class="scan-row">
          <select class="select" id="scanSelect"></select>
          <button class="icon-btn scan-refresh" id="scanRefresh" type="button" title="Scan aktualisieren" aria-label="Scan aktualisieren" data-i18n-title="modal_scan_refresh" data-i18n-aria-label="modal_scan_refresh">&#8635;</button>
        </div>
        <div class="help-text">
          <span data-i18n="modal_scan_help">Wähle eine App aus dem Windows-Scan.</span>
        </div>
        <div class="scan-loading hidden" id="scanLoading">
          <span class="dot"></span><span class="dot"></span><span class="dot"></span>
        </div>
      </div>

      <div class="field">
        <div class="label" data-i18n="modal_description_label">Beschreibung</div>
        <input class="input" id="appDesc" placeholder="Optional" data-i18n-placeholder="modal_description_placeholder" />
      </div>
    </div>

    <div class="modal-foot">
      <button class="btn-ghost" id="cancelBtn" type="button" data-i18n="cancel">Abbrechen</button>
      <button class="btn-primary" id="submitBtn" type="button" data-i18n="add">Hinzufügen</button>
    </div>
  </div>
</div>

<div class="modal-overlay" id="confirmOverlay" aria-hidden="true">
  <div class="modal modal-confirm" role="dialog" aria-modal="true" aria-labelledby="confirmTitle">
    <div class="modal-head">
      <div class="modal-title" id="confirmTitle" data-i18n="confirm_delete_default_title">Löschen bestätigen</div>
      <button class="icon-btn" id="confirmClose" type="button" aria-label="Schließen" data-i18n-aria-label="close_aria">×</button>
    </div>
    <div class="modal-body">
      <div class="confirm-text" id="confirmText" data-i18n="confirm_delete_default_message">Möchtest du diese App wirklich löschen?</div>
    </div>
    <div class="modal-foot">
      <button class="btn-ghost" id="confirmCancel" type="button" data-i18n="cancel">Abbrechen</button>
      <button class="btn-primary" id="confirmOk" type="button" data-i18n="confirm_delete_default_label">Löschen</button>
    </div>
  </div>
</div>

<div class="modal-overlay" id="catManageOverlay" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true" aria-labelledby="catManageTitle">
    <div class="modal-head">
      <div class="modal-title" id="catManageTitle" data-i18n="cat_manage_title">Kategorien verwalten</div>
      <button class="icon-btn" id="catManageClose" type="button" aria-label="Schließen" data-i18n-aria-label="close_aria">×</button>
    </div>
    <div class="modal-body">
      <div class="field">
        <div class="label" data-i18n="cat_new_label">Neue Kategorie</div>
        <div class="row2">
          <input class="input" id="catManageInput" placeholder="z.B. Lernen, Finanzen..." data-i18n-placeholder="cat_new_placeholder" />
          <button class="btn-primary" id="catManageAdd" type="button" data-i18n="add">Hinzufügen</button>
        </div>
        <div class="help-text" data-i18n="cat_manage_help">Löschen verschiebt Apps automatisch nach "Sonstiges".</div>
      </div>
      <div class="field">
        <div class="label" data-i18n="cat_existing_label">Vorhandene Kategorien</div>
        <div class="cat-manage-list" id="catManageList"></div>
      </div>
    </div>
    <div class="modal-foot">
      <button class="btn-ghost" id="catManageCancel" type="button" data-i18n="close">Schließen</button>
    </div>
  </div>
</div>

<div class="modal-overlay" id="settingsOverlay" aria-hidden="true">
  <div class="modal modal-settings" role="dialog" aria-modal="true" aria-labelledby="settingsTitle">
    <div class="modal-head">
      <div class="modal-title" id="settingsTitle" data-i18n="settings_title">Einstellungen</div>
      <button class="icon-btn" id="settingsClose" type="button" aria-label="Schließen" data-i18n-aria-label="close_aria">×</button>
    </div>
    <div class="modal-body">
      <div class="field">
        <div class="label" data-i18n="settings_hotkey_label">Hotkey (App ein/ausblenden)</div>
        <div class="row2">
          <input class="input" id="hotkeyInput" placeholder="Drücke 'Aufnehmen'…" data-i18n-placeholder="settings_hotkey_placeholder" readonly />
          <button class="btn-primary" id="hotkeyCapture" type="button" data-i18n="settings_capture">Aufnehmen</button>
        </div>
        <div class="help-text">
          <span data-i18n="settings_hotkey_help">Klicke auf „Aufnehmen“ und drücke die gewünschte Kombination.</span>
        </div>
      </div>
      <div class="field">
        <div class="label" data-i18n="settings_clipboard_label">Clipboard Verlauf</div>
        <select class="select" id="clipboardRetentionMode">
          <option value="count" data-i18n="settings_clip_count">Nach Anzahl löschen</option>
          <option value="time" data-i18n="settings_clip_time">Nach Zeit löschen</option>
        </select>
        <div class="clipboard-setting-extra hidden" id="clipboardTimeWrap">
          <div class="label" data-i18n="settings_clip_time_window">Zeitfenster</div>
          <select class="select" id="clipboardTimeCycle">
            <option value="4" data-i18n="settings_hours_4">4 Stunden</option>
            <option value="8" data-i18n="settings_hours_8">8 Stunden</option>
            <option value="24" data-i18n="settings_hours_24">24 Stunden</option>
            <option value="48" data-i18n="settings_hours_48">48 Stunden</option>
          </select>
        </div>
        <div class="clipboard-setting-extra hidden" id="clipboardCountWrap">
          <div class="label" data-i18n="settings_clip_max">Max. Einträge</div>
          <select class="select" id="clipboardMaxItems">
            <option value="5">5</option>
            <option value="10">10</option>
            <option value="25">25</option>
            <option value="50">50</option>
          </select>
        </div>
        <div class="help-text" data-i18n="settings_clip_help">Der Verlauf bleibt lokal auf diesem Gerät und kann jederzeit mit "Leeren" gelöscht werden.</div>
      </div>
      <div class="field">
        <div class="label" data-i18n="settings_theme">Theme</div>
        <div class="theme-row">
          <span class="theme-label" data-i18n="settings_light_mode">Light Mode</span>
          <label class="switch">
            <input type="checkbox" id="themeToggle" />
            <span class="slider"></span>
          </label>
        </div>
      </div>
      <div class="field">
        <div class="label" data-i18n="settings_accent">Akzentfarbe</div>
        <div class="accent-row" id="accentRow">
          <button class="accent-btn" data-accent="purple" title="Lila"></button>
          <button class="accent-btn" data-accent="blue" title="Blau"></button>
          <button class="accent-btn" data-accent="green" title="Grün"></button>
          <button class="accent-btn" data-accent="yellow" title="Gelb"></button>
          <button class="accent-btn" data-accent="pink" title="Pink"></button>
          <button class="accent-btn" data-accent="teal" title="Türkis"></button>
          <button class="accent-btn" data-accent="orange" title="Orange"></button>
          <button class="accent-btn" data-accent="red" title="Rot"></button>
          <button class="accent-btn" data-accent="cyan" title="Cyan"></button>
          <button class="accent-btn" data-accent="gray" title="Grau"></button>
        </div>
      </div>
      <div class="field">
        <div class="label" data-i18n="settings_background">Hintergrund</div>
        <div class="bg-choices" id="bgChoices">
          <label class="bg-choice">
            <input type="radio" name="bgMode" value="theme" />
            <span class="bg-thumb bg-theme"></span>
            <span class="bg-label" data-i18n="settings_bg_standard">Standard</span>
          </label>
          <label class="bg-choice">
            <input type="radio" name="bgMode" value="mono" />
            <span class="bg-thumb bg-mono"></span>
            <span class="bg-label" data-i18n="settings_bg_mono">Mono</span>
          </label>
          <label class="bg-choice bg-choice-duo">
            <input type="radio" name="bgMode" value="duo" />
            <span class="bg-thumb bg-duo"></span>
            <span class="bg-label" data-i18n="settings_bg_duo">Duo</span>
          </label>
          <label class="bg-choice">
            <input type="radio" name="bgMode" value="custom" />
            <span class="bg-thumb bg-custom"></span>
            <span class="bg-label" data-i18n="settings_bg_custom">Custom</span>
          </label>
        </div>
        <div class="bg-duo hidden" id="bgDuoControls">
          <div class="label" data-i18n="settings_duo_colors">Duo Farben</div>
          <div class="bg-duo-row">
            <span class="bg-duo-label" data-i18n="settings_duo_top">Oben rechts</span>
            <div class="bg-duo-palette" id="bgDuoTop"></div>
          </div>
          <div class="bg-duo-row">
            <span class="bg-duo-label" data-i18n="settings_duo_bottom">Unten links</span>
            <div class="bg-duo-palette" id="bgDuoBottom"></div>
          </div>
        </div>
        <div class="bg-upload hidden" id="bgUploadRow">
          <input class="input" id="bgUploadName" placeholder="Kein Bild gewaehlt" data-i18n-placeholder="settings_no_image" readonly />
          <button class="btn-primary" id="bgUploadBtn" type="button" data-i18n="settings_upload_image">Bild hochladen</button>
          <input id="bgUpload" type="file" accept="image/png,image/jpeg,image/jpg,image/webp" hidden />
        </div>
        <div class="help-text" data-i18n="settings_allowed_sizes">Erlaubte Groesse: 1920x1080, 2560x1440, 3840x2160, 5184x3456</div>
        <div class="error-box hidden" id="bgError" data-i18n="settings_bg_error">Bild hat falsches Format. Bitte 1920x1080, 2560x1440, 3840x2160 oder 5184x3456 verwenden.</div>
      </div>
    </div>
    <div class="modal-foot">
      <button class="btn-ghost" id="hotkeyCancel" type="button" data-i18n="cancel">Abbrechen</button>
      <button class="btn-primary" id="hotkeySave" type="button" data-i18n="save">Speichern</button>
    </div>
  </div>
</div>

<div class="modal-overlay" id="voiceSettingsOverlay" aria-hidden="true">
  <div class="modal modal-settings" role="dialog" aria-modal="true" aria-labelledby="voiceSettingsTitle">
    <div class="modal-head">
      <div class="modal-title" id="voiceSettingsTitle" data-i18n="voice_settings_title">Sprachsteuerung</div>
      <button class="icon-btn" id="voiceSettingsClose" type="button" aria-label="Schließen" data-i18n-aria-label="close_aria">&times;</button>
    </div>
    <div class="modal-body">
      <div class="field">
        <div class="label" data-i18n="settings_voice_activation">Sprachaktivierung</div>
        <div class="theme-row">
          <span class="theme-label" id="voiceActivationState">Aktiviert</span>
          <label class="switch">
            <input type="checkbox" id="voiceActivationToggle" />
            <span class="slider"></span>
          </label>
        </div>
        <div class="help-text hidden" id="voiceCommandHint" data-i18n="settings_voice_command_hint">Sage z.B.: "Kontrollzentrum starte CS2" oder "Control Center open Steam".</div>
      </div>
      <div class="field">
        <div class="label" data-i18n="settings_voice_wake_mode_label">Ansprache</div>
        <select class="select" id="voiceWakeModeSelect">
          <option value="standard" data-i18n="settings_voice_wake_mode_standard">Standard (Kontrollzentrum / Control Center)</option>
          <option value="custom" data-i18n="settings_voice_wake_mode_custom">Custom</option>
        </select>
      </div>
      <div class="field hidden" id="voiceWakeCustomWrap">
        <div class="label" data-i18n="settings_voice_wake_label">Ansprech-String</div>
        <input class="input" id="voiceWakeInput" data-i18n-placeholder="settings_voice_wake_placeholder" placeholder="z.B. Kontrollzentrum, Control Center" />
        <div class="help-text" data-i18n="settings_voice_wake_help">Ein oder mehrere Wake-Words, mit Komma getrennt.</div>
      </div>
      <div class="field hidden" id="voiceMicWrap">
        <div class="label" data-i18n="settings_voice_mic">Mikrofon</div>
        <select class="select" id="voiceMicSelect"></select>
        <div class="help-text" data-i18n="settings_voice_mic_help">Falls die Erkennung nicht reagiert, bitte dieses Mikrofon in Windows als Standard-Aufnahmegeraet setzen.</div>
      </div>
      <div class="field">
        <div class="label" data-i18n="settings_voice_voice">Stimme</div>
        <select class="select" id="voiceSelect"></select>
        <div class="help-text" data-i18n="settings_voice_voice_help">WÃ¤hle eine der verfÃ¼gbaren Systemstimmen aus.</div>
      </div>
      <div class="field">
        <div class="label" data-i18n="settings_voice_tone">Aktivierungston</div>
        <select class="select" id="voiceToneSelect">
          <option value="soft_low" data-i18n="settings_voice_tone_soft_low">Soft Low</option>
          <option value="deep_click" data-i18n="settings_voice_tone_deep_click">Deep Click</option>
          <option value="duo_console" data-i18n="settings_voice_tone_duo_console">Duo Console</option>
          <option value="warm_ping" data-i18n="settings_voice_tone_warm_ping">Warm Ping</option>
          <option value="short_thud" data-i18n="settings_voice_tone_short_thud">Short Thud</option>
        </select>
        <div class="help-text" data-i18n="settings_voice_tone_help">WÃ¤hle den Sound beim Aktivieren von Sprachbefehlen.</div>
      </div>
    </div>
    <div class="modal-foot">
      <button class="btn-ghost" id="voiceSettingsCancel" type="button" data-i18n="cancel">Abbrechen</button>
      <button class="btn-primary" id="voiceSettingsSave" type="button" data-i18n="save">Speichern</button>
    </div>
  </div>
</div>



